@model EditCONTACT_INFOModel
@{
    ViewBag.Title = "Редактор контакта";
    var ListMO = Model.CODE_MO.Select(x => new SelectListItem($"{x.NAM_MOK}({x.MCOD})", x.MCOD, x.MCOD == Model.INFO.CODE_MO || Model.CODE_MO.Count==1)).ToList();
}
@section Lib
{
    <link href="~/lib/Select2/select2.min.css" rel="stylesheet" />
    <script src="~/lib/Select2/select2.min.js"></script>
}
@section Scripts
 {
     <script>
         $(document).ready(function () {
             $('.select-select2').select2();
         });
     </script>
 }

<a asp-action="ContactInfo" class="ActionButton">назад</a>
<form method="post" asp-action="EditCONTACT_INFO" id="editform" asp-antiforgery="true">
    <hr />
    <div asp-validation-summary="All"></div>
    <input type="hidden"  asp-for="INFO.ID_CONTACT_INFO" />
    <div>
        <table>
            <tr>
                <td class="BoldText">Медицинская организация</td>
                <td width="400">
                    <select style="width: 100%;" class="select-select2" asp-for="INFO.CODE_MO" asp-items="ListMO">
                     
                    </select>
                    <span asp-validation-for="INFO.CODE_MO"></span>
                </td>
            </tr>
            <tr>
                <td class="BoldText">Фамилия</td>
                <td>
                    <input style="width: 100%;" asp-for="INFO.FAM"/>
                    <span asp-validation-for="INFO.FAM"></span>
                </td>
            </tr>
            <tr>
                <td class="BoldText">Имя</td>
                <td>
                    <input style="width: 100%;" asp-for="INFO.IM"/>
                    <span asp-validation-for="INFO.IM"></span>
                </td>
                
            </tr>
            <tr>
                <td class="BoldText">Отчество</td>
                <td>
                    <input style="width: 100%;" asp-for="INFO.OT"/>
                    <span asp-validation-for="INFO.OT"></span>
                </td>

            </tr>
            <tr>
                <td class="BoldText">Телефон</td>
                <td>
                    <input style="width: 100%;" asp-for="INFO.TEL"/>
                    <span asp-validation-for="INFO.TEL"></span>
                </td>
            </tr>
        </table>
    </div>
</form>
<hr />
<div class="div-space-between">
    <input type="submit" form="editform" value="Сохранить" class="ActionButton" />
    @if (Model.INFO.ID_CONTACT_INFO != 0)
    {
        <form method="post" asp-action="DeleteCONTACT_INFO" asp-route-ID_CONTACT_INFO="@Model.INFO.ID_CONTACT_INFO">
            <input type="submit" class="delButton" value="Удалить" onclick="@("return confirm('Удалить запись?')")" />
        </form>
    }
</div>

